<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>æ•°å­¦å­¦ä¹  - çˆ±å¥½</title>
  <style>
    /* å…¨å±€æ ·å¼ */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    /* é€€å‡ºæŒ‰é’®æ ·å¼ */
     .logout-btn {
         position: fixed;
         top: 100px;
         right: 20px;
         padding: 10px 20px;
         background-color: #e74c3c;
         color: white;
         border: none;
         border-radius: 5px;
         cursor: pointer;
         font-size: 14px;
         font-weight: 500;
         z-index: 9999;
         transition: background-color 0.3s ease;
     }
     
     .logout-btn:hover {
         background-color: #c0392b;
     }
    
    body {
      font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      color: #333;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      line-height: 1.6;
    }
    
    /* ä¸»å®¹å™¨ */
    .container {
      max-width: 900px;
      margin: 40px auto;
      padding: 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }
    
    /* æ ‡é¢˜å’Œå›¾æ ‡ */
    .hobby-header {
      text-align: center;
      margin-bottom: 40px;
      padding-bottom: 20px;
      border-bottom: 2px solid #4a90e2;
    }
    
    .icon {
      font-size: 48px;
      margin-bottom: 15px;
      color: #4a90e2;
    }
    
    .title {
      font-size: 36px;
      color: #2c3e50;
      margin-bottom: 15px;
      font-weight: 700;
    }
    
    .desc {
      font-size: 18px;
      color: #7f8c8d;
      line-height: 1.7;
      max-width: 700px;
      margin: 0 auto;
    }
    
    /* ä¸»è¦å†…å®¹ */
    .hobby-content {
      margin-bottom: 40px;
    }
    
    .section {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 25px;
      margin-bottom: 30px;
      border-left: 4px solid #4a90e2;
    }
    
    .section h2 {
      color: #2c3e50;
      margin-bottom: 15px;
      font-size: 24px;
      display: flex;
      align-items: center;
    }
    
    .section h2 i {
      margin-right: 10px;
      font-size: 20px;
    }
    
    .section p {
      margin-bottom: 15px;
      color: #555;
    }
    
    .math-topics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .topic-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .topic-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .topic-card h3 {
      color: #4a90e2;
      margin-bottom: 10px;
      font-size: 18px;
    }
    
    .topic-card p {
      font-size: 14px;
      color: #666;
    }
    
    /* ç¬”è®°ä¸Šä¼ å’Œå­¦ä¹ è®°å½• */
    .notes-section, .learning-records {
      background: white;
      border-radius: 10px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
    }
    
    .notes-section h2, .learning-records h2 {
      color: #2c3e50;
      margin-bottom: 20px;
      font-size: 24px;
    }
    
    /* æ–‡ä»¶ä¸Šä¼ æ ·å¼ */
    .upload-container {
      border: 2px dashed #ccc;
      border-radius: 8px;
      padding: 30px;
      text-align: center;
      margin-bottom: 20px;
      transition: border-color 0.3s ease;
    }
    
    .upload-container:hover {
      border-color: #4a90e2;
    }
    
    .upload-container input[type="file"] {
      display: none;
    }
    
    .upload-btn {
      background: #4a90e2;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }
    
    .upload-btn:hover {
      background: #357abd;
    }
    
    .upload-info {
      margin-top: 15px;
      font-size: 14px;
      color: #666;
    }
    
    /* å­¦ä¹ è®°å½•è¡¨å• */
    .record-form {
      margin-bottom: 20px;
    }
    
    .record-form textarea {
      width: 100%;
      height: 150px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      resize: vertical;
      font-family: inherit;
      font-size: 16px;
      line-height: 1.5;
      margin-bottom: 15px;
    }
    
    .record-form button {
      background: #2ecc71;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }
    
    .record-form button:hover {
      background: #27ae60;
    }
    
    /* è®°å½•åˆ—è¡¨ */
    .records-list {
      max-height: 400px;
      overflow-y: auto;
    }
    
    .record-item {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 15px;
      border-left: 4px solid #2ecc71;
    }
    
    .record-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .record-date {
      font-size: 14px;
      color: #999;
    }
    
    .delete-record {
      background: #e74c3c;
      color: white;
      border: none;
      padding: 5px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.3s ease;
    }
    
    .delete-record:hover {
      background: #c0392b;
    }
    
    .record-content {
      color: #333;
      line-height: 1.6;
      white-space: pre-wrap;
    }
    
    /* æ–‡ä»¶åˆ—è¡¨ */
    .files-list {
      max-height: 300px;
      overflow-y: auto;
    }
    
    .file-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
      margin-bottom: 10px;
    }
    
    .file-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .file-icon {
      font-size: 24px;
      color: #4a90e2;
    }
    
    .file-name {
      font-size: 16px;
      color: #333;
    }
    
    .file-date {
      font-size: 12px;
      color: #999;
    }
    
    .file-actions {
      display: flex;
      gap: 10px;
    }
    
    .view-file, .download-file {
      background: #3498db;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      text-decoration: none;
    }
    
    .delete-file {
      background: #e74c3c;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    
    .empty-message {
      text-align: center;
      padding: 40px 20px;
      color: #999;
      font-style: italic;
    }
    
    /* é€šçŸ¥ */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #2ecc71;
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      z-index: 1000;
      animation: slideIn 0.3s ease-out;
    }
    
    .notification.error {
      background: #e74c3c;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    /* è¿”å›æŒ‰é’® */
    .back-link {
      display: inline-block;
      background: #4a90e2;
      color: white;
      padding: 12px 24px;
      border-radius: 6px;
      text-decoration: none;
      margin-top: 20px;
      transition: background-color 0.3s ease;
    }
    
    .back-link:hover {
      background: #357abd;
    }
    
    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      .container {
        margin: 20px;
        padding: 15px;
      }
      
      .title {
        font-size: 28px;
      }
      
      .math-topics {
        grid-template-columns: 1fr;
      }
      
      .upload-container {
        padding: 20px;
      }
      
      .file-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .file-actions {
        width: 100%;
        justify-content: flex-end;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="hobby-header">
      <div class="icon">
        <img src="images/å·§å…‹åŠ›.png" alt="æ•°å­¦å­¦ä¹ " style="width: 100px; height: auto; border-radius: 8px;">
      </div>
      <h1 class="title">æ•°å­¦å­¦ä¹ </h1>
      <div class="desc">æ¢ç´¢æ•°å­¦çš„å¥¥ç§˜ï¼Œä»åŸºç¡€ä»£æ•°åˆ°é«˜ç­‰æ•°å­¦ï¼Œäº«å—æ€ç»´è®­ç»ƒå¸¦æ¥çš„ä¹è¶£ã€‚</div>
    </div>
    
    <div class="hobby-content">
      <div class="section">
        <h2><i>ğŸ¯</i> å­¦ä¹ ç›®æ ‡</h2>
        <p>ç³»ç»Ÿæ€§æŒæ¡æ•°å­¦çŸ¥è¯†ä½“ç³»ï¼ŒåŸ¹å…»é€»è¾‘æ€ç»´èƒ½åŠ›ï¼Œå°†æ•°å­¦åº”ç”¨äºå®é™…é—®é¢˜è§£å†³ä¸­ã€‚</p>
        <p>é€šè¿‡æŒç»­å­¦ä¹ å’Œç»ƒä¹ ï¼Œä¸æ–­æå‡æ•°å­¦ç´ å…»ï¼Œä¸ºå…¶ä»–å­¦ç§‘çš„å­¦ä¹ æ‰“ä¸‹åšå®åŸºç¡€ã€‚</p>
      </div>
      
      <div class="section">
        <h2><i>ğŸ“š</i> å­¦ä¹ é¢†åŸŸ</h2>
        <div class="math-topics">
          <div class="topic-card">
            <h3>ä»£æ•°</h3>
            <p>æ–¹ç¨‹ã€å‡½æ•°ã€å¤šé¡¹å¼ã€çŸ©é˜µç­‰åŸºç¡€çŸ¥è¯†åŠå…¶åº”ç”¨ã€‚</p>
          </div>
          <div class="topic-card">
            <h3>å‡ ä½•</h3>
            <p>å¹³é¢å‡ ä½•ã€ç«‹ä½“å‡ ä½•ã€è§£æå‡ ä½•ç­‰ç©ºé—´å…³ç³»çš„ç ”ç©¶ã€‚</p>
          </div>
          <div class="topic-card">
            <h3>å¾®ç§¯åˆ†</h3>
            <p>æé™ã€å¯¼æ•°ã€ç§¯åˆ†åŠå…¶åœ¨å„ä¸ªé¢†åŸŸçš„åº”ç”¨ã€‚</p>
          </div>
          <div class="topic-card">
            <h3>æ¦‚ç‡è®º</h3>
            <p>éšæœºäº‹ä»¶ã€æ¦‚ç‡åˆ†å¸ƒã€ç»Ÿè®¡æ¨æ–­ç­‰ä¸ç¡®å®šæ€§åˆ†æã€‚</p>
          </div>
        </div>
      </div>
      
      <!-- å­¦ä¹ ç¬”è®°æ–‡ä»¶ä¸Šä¼  -->
      <div class="notes-section">
        <h2>ğŸ“ æ•°å­¦ç¬”è®°ä¸Šä¼ </h2>
        <div class="upload-container">
          <label for="file-upload" class="upload-btn">é€‰æ‹©ç¬”è®°æ–‡ä»¶</label>
          <input type="file" id="file-upload" multiple accept=".pdf,.doc,.docx,.txt">
          <p class="upload-info">æ”¯æŒ PDFã€Wordã€TXT æ ¼å¼æ–‡ä»¶ï¼Œæœ€å¤§ 10MB</p>
        </div>
        <div class="files-list" id="files-list">
          <!-- æ–‡ä»¶åˆ—è¡¨å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
      </div>
      
      <!-- å­¦ä¹ è®°å½•åŠŸèƒ½ -->
      <div class="learning-records">
        <h2>ğŸ“Š å­¦ä¹ è®°å½•</h2>
        <div class="record-form">
          <textarea id="record-content" placeholder="è®°å½•ä»Šå¤©çš„æ•°å­¦å­¦ä¹ å†…å®¹..."></textarea>
          <button id="save-record" class="btn-save">ä¿å­˜è®°å½•</button>
        </div>
        <div class="records-list" id="records-list">
          <!-- è®°å½•å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
      </div>
    </div>
    
    <a href="1.html" class="back-link">è¿”å›é¦–é¡µ</a>
  </div>
  
  <script>
    // æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
    const fileUpload = document.getElementById('file-upload');
    const filesList = document.getElementById('files-list');
    
    // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºå·²ä¸Šä¼ çš„æ–‡ä»¶
    window.addEventListener('DOMContentLoaded', function() {
      displayFiles();
      displayRecords();
    });
    
    fileUpload.addEventListener('change', function(e) {
      const files = e.target.files;
      if (files.length > 0) {
        for (let i = 0; i < files.length; i++) {
          const file = files[i];
          
          // æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆ10MBé™åˆ¶ï¼‰
          if (file.size > 10 * 1024 * 1024) {
            showNotification(`æ–‡ä»¶ ${file.name} è¶…è¿‡10MBé™åˆ¶`, 'error');
            continue;
          }
          
          // åˆ›å»ºæ–‡ä»¶å¯¹è±¡
          const fileObj = {
            id: Date.now() + i,
            name: file.name,
            type: file.type,
            size: formatFileSize(file.size),
            date: new Date().toLocaleString(),
            // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šæœ‰æ–‡ä»¶å†…å®¹æˆ–URLï¼Œä½†åœ¨æœ¬åœ°æ¼”ç¤ºä¸­æˆ‘ä»¬åªå­˜å‚¨åŸºæœ¬ä¿¡æ¯
          };
          
          // ä¿å­˜åˆ°localStorage
          let savedFiles = JSON.parse(localStorage.getItem('mathNotesFiles') || '[]');
          savedFiles.unshift(fileObj);
          localStorage.setItem('mathNotesFiles', JSON.stringify(savedFiles));
          
          showNotification(`æ–‡ä»¶ ${file.name} å·²ä¸Šä¼ `);
        }
        
        // æ›´æ–°æ˜¾ç¤º
        displayFiles();
        
        // æ¸…ç©ºæ–‡ä»¶è¾“å…¥
        this.value = '';
      }
    });
    
    // æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨
    function displayFiles() {
      const savedFiles = JSON.parse(localStorage.getItem('mathNotesFiles') || '[]');
      
      if (savedFiles.length === 0) {
        filesList.innerHTML = '<div class="empty-message">æš‚æ— ä¸Šä¼ çš„ç¬”è®°æ–‡ä»¶</div>';
        return;
      }
      
      filesList.innerHTML = '';
      
      savedFiles.forEach(file => {
        const fileItem = document.createElement('div');
        fileItem.className = 'file-item';
        
        // æ ¹æ®æ–‡ä»¶ç±»å‹æ˜¾ç¤ºä¸åŒå›¾æ ‡
        let fileIcon = 'ğŸ“„';
        if (file.name.endsWith('.pdf')) fileIcon = 'ğŸ“‘';
        if (file.name.endsWith('.doc') || file.name.endsWith('.docx')) fileIcon = 'ğŸ“';
        
        fileItem.innerHTML = `
          <div class="file-info">
            <div class="file-icon">${fileIcon}</div>
            <div>
              <div class="file-name">${file.name}</div>
              <div class="file-date">${file.date} Â· ${file.size}</div>
            </div>
          </div>
          <div class="file-actions">
            <a href="#" class="view-file" data-id="${file.id}">æŸ¥çœ‹</a>
            <a href="#" class="download-file" data-id="${file.id}">ä¸‹è½½</a>
            <button class="delete-file" data-id="${file.id}">åˆ é™¤</button>
          </div>
        `;
        
        filesList.appendChild(fileItem);
      });
      
      // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
      document.querySelectorAll('.delete-file').forEach(btn => {
        btn.addEventListener('click', function() {
          const fileId = parseInt(this.getAttribute('data-id'));
          deleteFile(fileId);
        });
      });
      
      document.querySelectorAll('.view-file').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          showNotification('åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šæ‰“å¼€æ–‡ä»¶é¢„è§ˆ', 'info');
        });
      });
      
      document.querySelectorAll('.download-file').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          showNotification('åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè§¦å‘æ–‡ä»¶ä¸‹è½½', 'info');
        });
      });
    }
    
    // åˆ é™¤æ–‡ä»¶
    function deleteFile(fileId) {
      let savedFiles = JSON.parse(localStorage.getItem('mathNotesFiles') || '[]');
      savedFiles = savedFiles.filter(file => file.id !== fileId);
      localStorage.setItem('mathNotesFiles', JSON.stringify(savedFiles));
      displayFiles();
      showNotification('æ–‡ä»¶å·²åˆ é™¤');
    }
    
    // å­¦ä¹ è®°å½•åŠŸèƒ½
    const saveRecordBtn = document.getElementById('save-record');
    const recordContent = document.getElementById('record-content');
    const recordsList = document.getElementById('records-list');
    
    saveRecordBtn.addEventListener('click', function() {
      const content = recordContent.value.trim();
      if (content) {
        const record = {
          id: Date.now(),
          content: content,
          date: new Date().toLocaleString()
        };
        
        // ä¿å­˜åˆ°localStorage
        let records = JSON.parse(localStorage.getItem('mathLearningRecords') || '[]');
        records.unshift(record);
        localStorage.setItem('mathLearningRecords', JSON.stringify(records));
        
        // æ¸…ç©ºè¾“å…¥æ¡†
        recordContent.value = '';
        
        // æ›´æ–°æ˜¾ç¤º
        displayRecords();
        
        showNotification('å­¦ä¹ è®°å½•å·²ä¿å­˜');
      } else {
        showNotification('è¯·è¾“å…¥å­¦ä¹ è®°å½•å†…å®¹', 'error');
      }
    });
    
    // æ˜¾ç¤ºå­¦ä¹ è®°å½•
    function displayRecords() {
      const records = JSON.parse(localStorage.getItem('mathLearningRecords') || '[]');
      
      if (records.length === 0) {
        recordsList.innerHTML = '<div class="empty-message">æš‚æ— å­¦ä¹ è®°å½•</div>';
        return;
      }
      
      recordsList.innerHTML = '';
      
      records.forEach(record => {
        const recordItem = document.createElement('div');
        recordItem.className = 'record-item';
        recordItem.innerHTML = `
          <div class="record-header">
            <span class="record-date">${record.date}</span>
            <button class="delete-record" data-id="${record.id}">åˆ é™¤</button>
          </div>
          <div class="record-content">${record.content}</div>
        `;
        
        recordsList.appendChild(recordItem);
      });
      
      // æ·»åŠ åˆ é™¤äº‹ä»¶
      document.querySelectorAll('.delete-record').forEach(btn => {
        btn.addEventListener('click', function() {
          const recordId = parseInt(this.getAttribute('data-id'));
          deleteRecord(recordId);
        });
      });
    }
    
    // åˆ é™¤å­¦ä¹ è®°å½•
    function deleteRecord(recordId) {
      let records = JSON.parse(localStorage.getItem('mathLearningRecords') || '[]');
      records = records.filter(record => record.id !== recordId);
      localStorage.setItem('mathLearningRecords', JSON.stringify(records));
      displayRecords();
      showNotification('å­¦ä¹ è®°å½•å·²åˆ é™¤');
    }
    
    // æ˜¾ç¤ºé€šçŸ¥
    function showNotification(message, type = 'success') {
      const notification = document.createElement('div');
      notification.className = 'notification';
      if (type !== 'success') {
        notification.className += ` ${type}`;
      }
      notification.textContent = message;
      document.body.appendChild(notification);
      
      // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transition = 'opacity 0.5s ease';
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 500);
      }, 3000);
    }
    
    // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
  </script>
  <script>
        // ç™»å½•çŠ¶æ€æ£€æŸ¥
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥æ˜¯å¦å·²ç™»å½•
            const userType = localStorage.getItem('userType');
            
            // å¦‚æœæœªç™»å½•ï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µ
            if (!userType) {
                window.location.href = 'login.html';
                return;
            }
            
            // åˆ›å»ºé€€å‡ºç™»å½•æŒ‰é’®
            const logoutBtn = document.createElement('button');
            logoutBtn.className = 'logout-btn';
            logoutBtn.textContent = 'é€€å‡ºç™»å½•';
            document.body.appendChild(logoutBtn);
            
            // é€€å‡ºç™»å½•äº‹ä»¶
            logoutBtn.addEventListener('click', function() {
                localStorage.removeItem('userType');
                localStorage.removeItem('isLoggedIn');
                window.location.href = 'login.html';
            });
            
            // æ¸¸å®¢æ¨¡å¼æƒé™æ§åˆ¶
            if (userType === 'visitor') {
                // éšè—ç¼–è¾‘ã€ä¿å­˜å’Œåˆ é™¤æŒ‰é’®
                const editButtons = document.querySelectorAll('.edit-btn, .save-btn, .delete-btn');
                editButtons.forEach(btn => {
                    btn.style.display = 'none';
                });
                
                // éšè—æ‰€æœ‰è¡¨å•
                const forms = document.querySelectorAll('form');
                forms.forEach(form => {
                    form.style.display = 'none';
                });
            }
        });
    </script>
</body>
</html>